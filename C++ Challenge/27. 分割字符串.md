# 27. 分割字符串

我们有一个字符串，希望按特定字符分割成一个字符串组，譬如：

> input: "abc,def,ghi,jkl", delimiter = ','
>
> output: ["abc", "def", "ghi", "jkl"]

常见的一种办法是不断地使用find_first和substr，这里介绍一种利用字节流的办法：

```c++
std::vector<std::string> split(std::string text, char delimiter){
    std::istringstream sstr{text};
    std::vector<std::string> tokens;
    std::string token;
    while(std::getline(sstr, token, ',')){
        if(!token.empty()) tokens.push_back(token);
    }
    return tokens;
}
```

讲解：

line 1: 使用istringstream字节流，并使用text初始化这个字节流。

line 2 & 3: 初始化字符串数组(tokens)和占位用的字符串(token)

line 5: 使用std::getline不断读入子字符串，getline这里是巧用，通常的做法是在cin中不断地读取行：

```c++
std::string name;
std::getline(std::cin, name); // delimiter = '\n'
```

line 6: 只要被顺利读入，就将其加入到字符串数组当中。

line 8: return。

## 源文件

原文章使用了模板编程考虑了更广泛的情况，这里一并贴出：

```c++
#include <string>
#include <sstream>
#include <vector>

using namespace std::string_literals;
template <class Elem>
using tstring = std::basic_string<Elem, std::char_traits<Elem>, std::allocator<Elem>>;

template <class Elem>
using tstringstream = std::basic_stringstream<Elem, std::char_traits<Elem>, std::allocator<Elem>>;


template<typename Elem>
inline std::vector<tstring<Elem>> split(tstring<Elem> text, Elem const delimiter)
{
    auto sstr = tstringstream<Elem>{ text };
    auto tokens = std::vector<tstring<Elem>>{};
    auto token = tstring<Elem>{};
    while (std::getline(sstr, token, delimiter))
    {
        if (!token.empty()) tokens.push_back(token);
    }

    return tokens;
}
```


# 50. 多继承出现的问题，以及如何解决

容易出现数据冲突

```c++
#include <iostream>
using namespace std;

// 间接基类
class Base1 { public: int var1;};
// 直接基类
class Base2 : public Base1{ public: int var2;};
class Base3 : public Base1{ public: int var3;};

// 派生类
class Derive : public Base2, public Base3{
private:
    int var4;
public:
    void set_var1(int tmp) { var1 = tmp; } // 有错误，var1指的是base1的var1还是base2的var1?
    void set_var2(int tmp) { var2 = tmp; }
    void set_var3(int tmp) { var3 = tmp; }
    void set_var4(int tmp) { var4 = tmp; }
};

int main() {
    Derive d;
    return 0;
}
```

上面的这种继承方式就是菱形继承，这里的var1会发生冲突。

办法一：指明冲突数据的所属

```c++
class Derive : public Base2, public Base3{
private:
    int var4;
public:
    void set_var1(int tmp) { Base1::var1 = tmp; } // ok
    void set_var2(int tmp) { var2 = tmp; }
    void set_var3(int tmp) { var3 = tmp; }
    void set_var4(int tmp) { var4 = tmp; }
};
```

办法二：虚继承

```c++
class Base2 : virtual public Base1{ public: int var2;};
class Base3 : virtual public Base1{ public: int var3;};
```


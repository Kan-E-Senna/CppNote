# 序列的集合操作

我们有时需要进行序列的集合操作，譬如对序列进行并操作，或者进行求交，求差的操作。特别需要注意的一点是，这里我们讨论的是序列的集合操作，而不是集合的集合操作，我们需要把序列中的相同元素看成是不同的，才能正确理解下面的几个函数。

另外需要注意，序列必须是已排序好的序列，未排序好的序列得出的结果是无意义的。

```c++
std::vector<int> v{1,2,3,4,4,5}; // 这里的两个4，要看成是“不一样的”
std::vector<int> w{2,3,3,4,6,8}; // 这里的两个3，也要看成是“不一样的”
std::vector<int> m;
```



## set_union 并

```c++
std::set_union(v.cbegin(), v.cend(), w.cbegin(), w.cend(), std::back_inserter(m));
// 1 2 3 3 4 4 5 6 8
```

解释一下为什么会出现两个3和两个4，第一个3是v的第一个3和w的第一个3，而第二个3则是w的第二个3。同理，第一个4是v的第一个4和w的第一个4，而第二个4则是v的第二个4

## merge 合并

```c++
std::merge(v.cbegin(), v.cend(), w.cbegin(), w.cend(), std::back_inserter(m)); 
// 1 2 2 3 3 3 4 4 4 5 6 8
```

## set_intersection 交

```c++
std::set_intersection(v.cbegin(), v.cend(), w.cbegin(), w.cend(), std::back_inserter(m));
// 2 3 4
```

求的是两个集合中都出现的元素。特别地有：

```c++
std::vector<int> v{1,2,3,4,4,5};
std::vector<int> w{2,3,3,4,4,6,8}; // 多了一个4
std::vector<int> m;

std::set_intersection(v.cbegin(), v.cend(), w.cbegin(), w.cend(), std::back_inserter(m));
// 2 3 4 4
```

## set_difference

```c++
std::set_difference(v.cbegin(), v.cend(), w.cbegin(), w.cend(), std::back_inserter(m));
// 1 4 5
```

求差，在v中出现但未在w中出现的元素。

## set_symmertric_difference

对称差，先求v对w的差，再求w对v的差，再把这两个集合并起来。

```c++
std::set_symmetric_difference(v.cbegin(), v.cend(), w.cbegin(), w.cend(), std::back_inserter(m));
// 1 3 4 5 6 8
```

v对w的差是1 4 5，w对v的差是3 6 8（注意这里有一个3，是因为w比v多一个3），二者合并就是1 3 4 5 6 8。

## includes

includes() 返回一个集合是否是另一个集合的子集。或者说，一个集合是否含有另一集合所拥有的全部元素。

```c++
std::vector<int> v{1,2,3,4,4,5};
std::vector<int> w{2,3,3,4,6,8};
std::vector<int> m{1,2,3,4};
std::vector<int> x{};

std::cout
    << std::includes(v.begin(), v.end(), w.begin(), w.end()) << " "        // 0
    << std::includes(v.begin(), v.end(), m.begin(), m.end()) << " "        // 1
    << std::includes(v.begin(), v.end(), x.begin(), x.end()) << std::endl; // 1
```


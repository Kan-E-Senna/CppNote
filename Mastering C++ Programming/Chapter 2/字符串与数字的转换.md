# 字符串与数字的转换

## string与wstring

C++中string就是char[]，wstring是宽字符数字，可以放unicode字符，譬如中文。

## 数字转字符串

先引入string头文件，再使用std::to_string或者std::to_wstring。

示例：

```c++
# include<string>

int main() {
    auto si = std::to_string(42);
    auto sl = std::to_string(42L);
    auto su = std::to_string(42u);
    auto sd = std::to_wstring(42.5);
    auto sld = std::to_wstring(23.5L);
}
```

## 字符串转数字

需要注意的是数字有多种类型（int, double, long, long long, unsigned等等），另外字符串形式的数字也有多种可能，可能是"42"这种普通类型，或者“0x42”这种有前缀的类型，也可能有无效字符或者空格，如"   42fortytwo"，还可能是科学计数法"1.06e+2"，还可能是二进制或者是十六进制，所以字符串转数字的函数相对较复杂，总的来说，可以归纳为如下的函数集合：

```c++
Type ston(const std::string& str, std::size_t* pos = 0; int base = 10);
Type ston(const std::wstring& str, std::size_t* pos = 0; int base = 10);
```

这个ston（string to number）是一个代指，有多种情况，具体说来有如下的情况：

```c++
int stoi(...);
long stol(...);
long long stoll(...);
unsigned long stoul(...);
unsigned long long stoull(...);
float stof(...);
double stod(...);
long double stold(...);
```

pos指示字符串中有多少个字符参与了转换，因为前缀可能是空格或者0x。

```c++
size_t pos{1};
int x = std::stoi("   42", &pos); //pos = 5，前面三个空格再带上42两个字符
int y = std::stoi("   0x42", &pos, 16); // pos = 7， 前面三个空格再带上0x42四个字符
int z = std::stoi("   0x42", &pos, 10); // pos = 4， 前面三个空格再带上0一个字符，'x'不是十进制下的合法数字故舍去。
```

## 字符串转浮点数的特例

除了"123.456"这种普通的浮点数，字符串转浮点数函数还可以接受特殊字符串：

```c++
auto d1 = std::stod("INF");       // d1 = INF
auto d2 = std::stod("-infinity"); // d2 = -INF
auto d3 = std::stod("NAN");       // d3 = nan
auto d4 = std::stod("-nanabc")    // 忽略abc，d4 = -nan
```

## 有关数字转成其它进制字符串

这一部分不在本书内容范围内，这里只是简单提一下，需要用到bitset以及std::hex之类的办法。
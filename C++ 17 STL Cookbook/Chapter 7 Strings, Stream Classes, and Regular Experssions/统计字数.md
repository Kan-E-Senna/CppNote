# 统计字数

## std::istringstream

std::istringstream可以用来输入一个字符串。

## std::istream_iteritor

std::istream_iteritor 可以用来对输入的字符串进行迭代。

头文件：

```c++
#include <iostream>
#include <string>
#include <sstream> // std::istringstream
#include <iterator> // std::istream_iteritor
#include <fstream> // std::ifstream
```

例子：

```c++
std::istringstream is{"This is a sentence."};
for(std::istream_iterator<std::string> iter{is}; iter!=std::istream_iterator<std::string>{}; iter++){
    std::cout << *iter << std::endl;
}
```

输出：

```
This
is
a
sentence.
```

## std::ifstream

ifstream用来读取文件

例子：

```
// some_textfile.txt
This is a file.
The content is just "Hello".
```

```c++
std::ifstream ifs{"some_textfile.txt"};
for(std::istream_iterator<std::string> iter{ifs};iter!=std::istream_iterator<std::string>{};iter++){
    std::cout << *iter << std::endl;
}
```

输出：

```
This
is
a
file.
The
content
is
just
"Hello".
```

所以，要做到统计字符串，我们可以这样写：

```c++
template<typename T>
size_t wordcount(T &is){
    return std::distance(std::istream_iterator<std::string>{is}, {});
    // 更为规范的写法应该是
    // std::distance(std::istream_iterator<std::string>{is}, std::istream_iterator<std::string>{});
    // 这里直接用"{}"代替std::istream_iterator<std::string>{} 是完全可以的。
}
```

main函数：

```c++
int main() {
    std::ifstream ifs{"some_textfile.txt"};
    std::istringstream is{"This is a sentence."};
    auto wc_str = wordcount(is);
    auto wc_file = wordcount(ifs);
    std::cout << "In the string given, There are " << wc_str << " words." << std::endl;
    std::cout << "In the string given, There are " << wc_file << " words." << std::endl;
    return 0;
}
```

输出：

```
In the string given, There are 4 words.
In the string given, There are 9 words.
```

